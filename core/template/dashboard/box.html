<div class="eqLogic eqLogic-widget allowResize allowReorderCmd allowLayout #custom_layout# #eqLogic_class# #category#"
    style="min-height: 150px;min-width:140px; position: relative; width:#width#; height:#height#;background-color:#background-color#!important; color:#color#; border:#border#; border-radius:#border-radius#;#style#"
    data-eqType="#eqType#" data-eqLogic_id="#id#" data-eqLogic_uid="#uid#" data-cat_color="#catcolore#"
    data-version="#version#" data-translate-category="#translate_category#" data-category="#category#" data-tags="#tags#">
	<span class="statusCmd"></span>
	<span class="cmd refresh pull-right cursor" data-cmd_id="#refresh_id#">
		<i class="fas fa-sync"></i>
	</span>
	<center class="widget-name">
		<a href="#eqLink#">#name_display# <span class="object_name">#object_name#</span></a>
	</center>
	<script>
		global_#uid#_toolhead = "";
		global_#uid#is_rotate = "";
		global_#uid#_connect = false;
		if ('#refresh_id#' != ''){
			$('.eqLogic[data-eqLogic_uid=#uid#] .refresh').on('click', function () {
				jeedom.cmd.execute({id: '#refresh_id#'});
			});
		} else {
			$('.eqLogic[data-eqLogic_uid=#uid#] .refresh').remove();
		}
		function #uid#js_snapmaker_printhtmltable(list,nom_tableau,headtable,commande) {
			local_table = document.createElement("table");
			local_thr = document.createElement("thead");
			local_tr = document.createElement("tr");
			local_tr.setAttribute("style","white-space: nowrap;");
			for(j = 0; count(headtable) > j; j++) {
				local_th = document.createElement("th");
				local_th.setAttribute("style","padding: 5px;");
				if (headtable[j] == null) {
					local_th.style.display = "none";
				} else {
					local_th.innerHTML = headtable[j];
				}
				local_tr.appendChild(local_th);
			}
			local_thr.appendChild(local_tr);
			local_table.appendChild(local_thr);
			local_tb = document.createElement("tbody");
			if (list != "") {
				line = list.split('-!-');
				for(j = 0; line.length > j; j++) {
					local_tr = document.createElement("tr");
					lineelement = line[j].split('-:-');
					for(k = 0; lineelement.length > k; k++) {
						local_td = document.createElement("td");
						local_td.setAttribute("style","padding: 5px;");
						local_td.innerHTML = lineelement[k];
						if (headtable[k] == null) {
							local_td.style.display = "none";
						}
						local_tr.appendChild(local_td);
					}
					for(k = 0; commande.length > k; k++) {
						local_td = document.createElement("td");
						bouton_table = commande[k]
						bouton_table = bouton_table.replaceAll("#value#", lineelement[0]); // remplace value par la valeur de la premiere colonne de la ligne
						local_td.innerHTML = bouton_table;
						if (headtable[k] == null) {
							local_td.style.display = "none";
						}
						local_tr.appendChild(local_td);
					}
					local_incrementj = j + 1;
					local_tr.setAttribute("onclick","#uid#js_snapmaker_selectfichier(" + local_incrementj + ");");
					local_tb.appendChild(local_tr);
				}
			}
			local_table.appendChild(local_tb);
			local_table.setAttribute("class","table table-condensed table-bordered table-striped");
			$('.cmd[data-eqlogic_id=' + nom_tableau + '] .state').empty();
			$('.cmd[data-eqlogic_id=' + nom_tableau + '] .state').append(local_table);
		}
		function #uid#change_visibility_toolhead(local_value) {
			if (local_value == "TOOLHEAD_3DPRINTING_1") {
				$('.eqLogic[data-eqLogic_uid=#uid#] .is3dprint').show();
				global_#uid#_toolhead = "3dprint";
			} else if (local_value == "3ddoubleprint") { //non configurer
				$('.eqLogic[data-eqLogic_uid=#uid#] .is3ddoubleprint').show();
				global_#uid#_toolhead = "3ddoubleprint";
			} else if (local_value == "TOOLHEAD_CNC_1") { //non configurer
				$('.eqLogic[data-eqLogic_uid=#uid#] .iscnc').show();
				global_#uid#_toolhead = "cnc";
			} else if (local_value == "TOOLHEAD_LASER_1") { //non configurer
				$('.eqLogic[data-eqLogic_uid=#uid#] .islaser').show();
				global_#uid#_toolhead = "laser";
			}
		}
		function #uid#change_visibility_connect() {
			if (global_#uid#_connect) {
				$('.eqLogic[data-eqLogic_uid=#uid#] .isconnected').show();
			} else {
				$('.eqLogic[data-eqLogic_uid=#uid#] .isconnected').hide();
			}
		}
		function #uid#change_visibility_status(local_value) {
			if (local_value == "PAUSED") {
				$('.eqLogic[data-eqLogic_uid=#uid#] .is3dprintpauseoridle').show();
				$('.eqLogic[data-eqLogic_uid=#uid#] .isprintrunning').show();
				$('.eqLogic[data-eqLogic_uid=#uid#] .smpause').hide();
				$('.eqLogic[data-eqLogic_uid=#uid#] .smresume').show();
				$('.eqLogic[data-eqLogic_uid=#uid#] .smstop').show();
			} else if (local_value == "RUNNING") {
				$('.eqLogic[data-eqLogic_uid=#uid#] .is3dprintpauseoridle').hide();
				$('.eqLogic[data-eqLogic_uid=#uid#] .isprintrunning').show();
				$('.eqLogic[data-eqLogic_uid=#uid#] .smpause').show();
				$('.eqLogic[data-eqLogic_uid=#uid#] .smresume').hide();
				$('.eqLogic[data-eqLogic_uid=#uid#] .smstop').show();
			} else if (local_value == "IDLE") {
				$('.eqLogic[data-eqLogic_uid=#uid#] .is3dprintpauseoridle').show();
				$('.eqLogic[data-eqLogic_uid=#uid#] .isprintrunning').hide();
				$('.eqLogic[data-eqLogic_uid=#uid#] .smpause').hide();
				$('.eqLogic[data-eqLogic_uid=#uid#] .smresume').hide();
				$('.eqLogic[data-eqLogic_uid=#uid#] .smstop').hide();
			} else {// retirer toutes les commandes
				$('.eqLogic[data-eqLogic_uid=#uid#] .is3dprintpauseoridle').hide();
				$('.eqLogic[data-eqLogic_uid=#uid#] .isprintrunning').hide();
				$('.eqLogic[data-eqLogic_uid=#uid#] .smpause').hide();
				$('.eqLogic[data-eqLogic_uid=#uid#] .smresume').hide();
				$('.eqLogic[data-eqLogic_uid=#uid#] .smstop').hide();
			}
		}
		function #uid#switch_connect(stats) {
			if (stats == '1') { // connecter
				global_#uid#_connect = true;
				$('.eqLogic[data-eqLogic_uid=#uid#] .statusimpr .iconoff').hide();
				$('.eqLogic[data-eqLogic_uid=#uid#] .statusimpr .iconon').show();
				$('.eqLogic[data-eqLogic_uid=#uid#] .statusimpr .connect').hide();
				$('.eqLogic[data-eqLogic_uid=#uid#] .statusimpr .disconnect').show();
				$('.cmd[data-cmd_id=#printStatus_id#] .fistloginmsg').empty();
			} else if (stats == '2') { // première connexion
				global_#uid#_connect = false;
				$('.eqLogic[data-eqLogic_uid=#uid#] .statusimpr .iconoff').hide();
				$('.eqLogic[data-eqLogic_uid=#uid#] .statusimpr .iconon').show();
				$('.eqLogic[data-eqLogic_uid=#uid#] .statusimpr .connect').hide();
				$('.eqLogic[data-eqLogic_uid=#uid#] .statusimpr .disconnect').show();
				$('.cmd[data-cmd_id=#printStatus_id#] .fistloginmsg').empty().append('<span class="label label-warning">valider sur la snapmaker la première connexion</span>');
			} else { // pas de connexion
				global_#uid#_connect = false;
				$('.eqLogic[data-eqlogic_id=#id#] .fileselect .start').attr('disabled',true);
				$('.eqLogic[data-eqlogic_id=#id#] .fileselect .upsnap').attr('disabled',true);
				$('.eqLogic[data-eqLogic_uid=#uid#] .statusimpr .iconoff').show();
				$('.eqLogic[data-eqLogic_uid=#uid#] .statusimpr .iconon').hide();
				$('.eqLogic[data-eqLogic_uid=#uid#] .statusimpr .connect').show();
				$('.eqLogic[data-eqLogic_uid=#uid#] .statusimpr .disconnect').hide();
				$('.cmd[data-cmd_id=#printStatus_id#] .fistloginmsg').empty();
			}
			#uid#change_visibility_connect();
		}
		function #uid#switch_caisson(stats) {
			if (stats == 'true') {
				$('.eqLogic[data-eqLogic_uid=#uid#] .iscaissonon').show();
			} else {
				$('.eqLogic[data-eqLogic_uid=#uid#] .iscaissonon').hide();
			}
		}
		function #uid#switch_rotate(stats) {
			global_#uid#is_rotate = stats;
			if (stats == 'true') {
				$('.eqLogic[data-eqLogic_uid=#uid#] .isrotateon').show();
			} else {
				$('.eqLogic[data-eqLogic_uid=#uid#] .isrotateon').hide();
			}
		}
		function #uid#switch_reconnect(stats) {
			if (stats == '1') { // autoconnect actif
				$('.eqLogic[data-eqLogic_uid=#uid#] .autoreco .iconoff').hide();
				$('.eqLogic[data-eqLogic_uid=#uid#] .autoreco .iconon').show();
				$('.eqLogic[data-eqLogic_uid=#uid#] .autoreco .setautoconnect').hide();
				$('.eqLogic[data-eqLogic_uid=#uid#] .autoreco .unsetautoconnect').show();
			} else { // pas de valuer ou pas d'autoconnect
				$('.eqLogic[data-eqLogic_uid=#uid#] .autoreco .iconoff').show();
				$('.eqLogic[data-eqLogic_uid=#uid#] .autoreco .iconon').hide();
				$('.eqLogic[data-eqLogic_uid=#uid#] .autoreco .setautoconnect').show();
				$('.eqLogic[data-eqLogic_uid=#uid#] .autoreco .unsetautoconnect').hide();
			}
		}
		function #uid#switch_alim(stats) {
			if (stats == '1') { // active
				$('.eqLogic[data-eqLogic_uid=#uid#] .isaliminfo').show();
				$('.cmd[data-cmd_id=#aliminfo_id#] .iconoff').hide();
				$('.cmd[data-cmd_id=#aliminfo_id#] .iconon').show();
				$('.cmd[data-cmd_id=#onalim_id#]').hide();
				$('.cmd[data-cmd_id=#offalim_id#]').show();
			} else if (stats == '0') {// inactive
				$('.eqLogic[data-eqLogic_uid=#uid#] .isaliminfo').show();
				$('.cmd[data-cmd_id=#aliminfo_id#] .iconoff').show();
				$('.cmd[data-cmd_id=#aliminfo_id#] .iconon').hide();
				$('.cmd[data-cmd_id=#onalim_id#]').show();
				$('.cmd[data-cmd_id=#offalim_id#]').hide();
			} else { // pas de commande
				$('.eqLogic[data-eqLogic_uid=#uid#] .isaliminfo').hide();
			}
		}
		function #uid#switch_shutdown(stats) {
			if (stats == '1') { // autoshutdown actif
				$('.eqLogic[data-eqLogic_uid=#uid#] .autoshutdown .iconoff').hide();
				$('.eqLogic[data-eqLogic_uid=#uid#] .autoshutdown .iconon').show();
				$('.eqLogic[data-eqLogic_uid=#uid#] .autoshutdown .setautoshutdown').hide();
				$('.eqLogic[data-eqLogic_uid=#uid#] .autoshutdown .unsetautoshutdown').show();
			} else { // pas de valuer ou pas d'autoshutdown
				$('.eqLogic[data-eqLogic_uid=#uid#] .autoshutdown .iconoff').show();
				$('.eqLogic[data-eqLogic_uid=#uid#] .autoshutdown .iconon').hide();
				$('.eqLogic[data-eqLogic_uid=#uid#] .autoshutdown .setautoshutdown').show();
				$('.eqLogic[data-eqLogic_uid=#uid#] .autoshutdown .unsetautoshutdown').hide();
			}
		}
		function #uid#_set_value_saveworkSpeed(speed) {
			if (isNaN(speed)) {
				$('.cmd[data-cmd_id=#saveworkSpeed_id#] .in_value').val('100 %')
			} else {
				$('.cmd[data-cmd_id=#saveworkSpeed_id#] .in_value').val(parseFloat(speed).toFixed(0) + " %")
			}
		}
		function #uid#_set_value_zoffset(offset) {
			if (isNaN(offset)) {
				$('.cmd[data-cmd_id=#offsetZ_id#] .in_value').val('0 mm')
			} else {
				$('.cmd[data-cmd_id=#offsetZ_id#] .in_value').val(parseFloat(offset).toFixed(2) + " mm")
			}
		}
		function #uid#_set_value_nozzleTargetTemperature(tntemp) {
			if (isNaN(tntemp)) {
				$('.cmd[data-cmd_id=#nozzleTargetTemperature_id#] .in_value').val('0 °C')
			} else {
				$('.cmd[data-cmd_id=#nozzleTargetTemperature_id#] .in_value').val(parseFloat(tntemp).toFixed(0) + " °C")
			}
		}
		function #uid#_set_value_heatedBedTargetTemperature(tbtemp) {
			if (isNaN(tbtemp)) {
				$('.cmd[data-cmd_id=#heatedBedTargetTemperature_id#] .in_value').val('0 °C')
			} else {
				$('.cmd[data-cmd_id=#heatedBedTargetTemperature_id#] .in_value').val(parseFloat(tbtemp).toFixed(0) + " °C")
			}
		}
		function #uid#_set_value_Time(element,eliptime) {
			let sec_num = parseInt(eliptime, 10);
			let hours   = Math.floor(sec_num / 3600);
			let minutes = Math.floor((sec_num - (hours * 3600)) / 60);
			let seconds = sec_num - (hours * 3600) - (minutes * 60);
			element.find('.state').empty().append(hours+'h '+minutes+'m '+seconds+ 's')
		}
		function #uid#js_snapmaker_selectfichier(postion_tableau) {
			// ajoute l'atribut selected sur la ligne selectionner
			$('.cmd[data-eqlogic_id=#filelist_id#] .state tr').removeClass('highlight');
			$('.cmd[data-eqlogic_id=#filelist_id#] .state tr:eq('+postion_tableau+')').addClass('highlight');
			// recupere le nom du fichier
			let nomfichier = $('.cmd[data-eqlogic_id=#filelist_id#] .state tr:eq('+postion_tableau+') td:eq(0)').text();
			// recupere la taille du fichier
			let taillefichier = $('.cmd[data-eqlogic_id=#filelist_id#] .state tr:eq('+postion_tableau+') td:eq(1)').text();
			// recupere la date du fichier
			let datefichier = $('.cmd[data-eqlogic_id=#filelist_id#] .state tr:eq('+postion_tableau+') td:eq(2)').text();
			// recupere le nombre de ligne du fichier
			let typemachine = $('.cmd[data-eqlogic_id=#filelist_id#] .state tr:eq('+postion_tableau+') td:eq(3)').text();
			// recupere le nombre de ligne du fichier
			let nbrligne = $('.cmd[data-eqlogic_id=#filelist_id#] .state tr:eq('+postion_tableau+') td:eq(4)').text();
			// recupere le temps d'impression du fichier
			let temps_impr = $('.cmd[data-eqlogic_id=#filelist_id#] .state tr:eq('+postion_tableau+') td:eq(5)').text();
			// recupere l'image en base64 du fichier
			let img64 = $('.cmd[data-eqlogic_id=#filelist_id#] .state tr:eq('+postion_tableau+') td:eq(6)').text();
			// recupere le temps d'impression du fichier
			let typeoutil = $('.cmd[data-eqlogic_id=#filelist_id#] .state tr:eq('+postion_tableau+') td:eq(7)').text();
			// recupere l'image en base64 du fichier
			let axerotatif = $('.cmd[data-eqlogic_id=#filelist_id#] .state tr:eq('+postion_tableau+') td:eq(8)').text();

			// affiche les info du fichier
			$('.eqLogic[data-eqLogic_id=#id#] .fileselect .fileselectname .state').text(nomfichier);
			$('.eqLogic[data-eqlogic_id=#id#] .fileselect .fileselectdate .state').text(datefichier);
			$('.eqLogic[data-eqlogic_id=#id#] .fileselect .fileselecttaille .state').text(taillefichier);
			$('.eqLogic[data-eqlogic_id=#id#] .fileselect .fileselectligne .state').text(nbrligne);
			#uid#_set_value_Time($('.eqLogic[data-eqlogic_id=#id#] .fileselect .fileselecttemps'),temps_impr);
			$('.eqLogic[data-eqlogic_id=#id#] .fileselect .fileselecttype .state').text(typemachine);
			$('.eqLogic[data-eqlogic_id=#id#] .fileselect .fileselecttool .state').text(typeoutil);
			$('.eqLogic[data-eqlogic_id=#id#] .fileselect .fileselectrotate .state').text(axerotatif);
			// insert l'image en base64 dans le src de l'image
			$('.eqLogic[data-eqlogic_id=#id#] .fileselect .fileselectimage .state').attr('src',img64);
			// active les bouton
			$('.eqLogic[data-eqlogic_id=#id#] .fileselect .renamefile').attr('disabled',false);
			$('.eqLogic[data-eqlogic_id=#id#] .fileselect .deletefile').attr('disabled',false);
			$('.eqLogic[data-eqlogic_id=#id#] .fileselect .download').attr('disabled',false);

			// si imprimante connecter active les boutons
			$('.eqLogic[data-eqlogic_id=#id#] .fileselect .start').attr('disabled',true);
			$('.eqLogic[data-eqlogic_id=#id#] .fileselect .upsnap').attr('disabled',true);
			if (global_#uid#_connect) {
				// si le type d'outil correspond a la machine active le bouton start
				if (typemachine == "3dp") {
					if ((typeoutil == "singleExtruderToolheadForSM2") && (global_#uid#_toolhead == "3dprint")) {
						$('.eqLogic[data-eqlogic_id=#id#] .fileselect .start').attr('disabled',false);
					} else if ((typeoutil == "dualExtruderToolheadForSM2") && (global_#uid#_toolhead == "3ddoubleprint")) {
						$('.eqLogic[data-eqlogic_id=#id#] .fileselect .start').attr('disabled',false);
					}
				} else if (typemachine == "cnc") {
					if (global_#uid#_toolhead == "cnc") {
						if ((global_#uid#is_rotate == "true") && (axerotatif == "true")) {
							$('.eqLogic[data-eqlogic_id=#id#] .fileselect .start').attr('disabled',false);
						} else if ((!global_#uid#is_rotate == "false") && (axerotatif == "false")) {
							$('.eqLogic[data-eqlogic_id=#id#] .fileselect .start').attr('disabled',false);
						}
					}
				} else if (typemachine == "laser") {
					if (global_#uid#_toolhead == "laser") {
						if ((global_#uid#is_rotate == "true") && (axerotatif == "true")) {
							$('.eqLogic[data-eqlogic_id=#id#] .fileselect .start').attr('disabled',false);
						} else if ((!global_#uid#is_rotate == "false") && (axerotatif == "false")) {
							$('.eqLogic[data-eqlogic_id=#id#] .fileselect .start').attr('disabled',false);
						}
					}
				}
				$('.eqLogic[data-eqlogic_id=#id#] .fileselect .upsnap').attr('disabled',false);
			}
		}
	</script>
	<style>
		.table tbody tr.highlight td {
			background-color: rgb(72, 150, 92);
		}
		.vertical-range {
			appearance: slider-vertical; /* Pour les navigateurs basés sur WebKit */
			width: 10px;
			height: 175px;
			padding: 0 5px;
		}
		.titre {
			cursor: pointer;
		}
		.isconnected {
			display: none;
		}
		.isprintrunning {
			display: none;
		}
		.is3dprint {
			display: none;
		}
		.is3dprintpauseoridle {
			display: none;
		}
		.is3ddoubleprint {
			display: none;
		}
		.islaser {
			display: none;
		}
		.iscnc {
			display: none;
		}
		.iscaissonon {
			display: none;
		}
		.isrotateon {
			display: none;
		}
		.isaliminfo {
			display: none;
		}
	</style>
	<div class="eq_body_#id#" >
		<center>
			<div class="Pan_menu" style="max-width: #widthmenu#px; min-width: #widthmenu#px; max-height: #heightmenu#px; min-height: #heightmenu#px; overflow:auto;">
				<div class="menu-menu">
					<div class="content-xs titre">
						<strong>MENU</strong>
					</div>
					<div class="contenue">
						<div class="statusimpr">
							<span class="cmdName">status connexion : </span>
							<div class="cmd cmd-widget tooltips status" data-type="info" data-subtype="numeric" data-cmd_id="#status_id#" data-cmd_uid="cmd#status_uid#" data-version="dashboard" data-template="default" data-eqlogic_id="#id#" title="Valeur du: #status_collectDate#">
								<div class="content-sm">
									<span class="iconoff"><i class="fas fa-times"></i></span>
									<span class="iconon"><i class="icon jeedom-prise"></i></span>
								</div>
							</div>
							<div class="cmd cmd-widget tooltips connect" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#connect_id#" data-cmd_uid="cmd#connect_uid#" data-version="dashboard" data-eqlogic_id="#id#">
								<div class="content-sm">
									<a class="btn btn-sm btn-default action">connect</a>
								</div>
							</div>
							<div class="cmd cmd-widget tooltips disconnect" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#disconnect_id#" data-cmd_uid="cmd#disconnect_uid#" data-version="dashboard" data-eqlogic_id="#id#">
								<div class="content-sm">
									<a class="btn btn-sm btn-default action">disconnect</a>
								</div>
							</div>
							<script>
								#uid#switch_connect('#status#');
								$('.cmd[data-cmd_id=#connect_id#]:last .action').off('click').on('click', function () {
									jeedom.cmd.execute({id: '#connect_id#'})
								})
								$('.cmd[data-cmd_id=#disconnect_id#]:last .action').off('click').on('click', function () {
									jeedom.cmd.execute({id: '#disconnect_id#'})
								})
								jeedom.cmd.addUpdateFunction('#status_id#',function(_options) {
									let cmd = $('.cmd[data-cmd_id=#status_id#]')
									cmd.attr('title', 'Valeur du: '+_options.valueDate)
									#uid#switch_connect(_options.display_value);
								});
							</script>
						</div>
						<div class="autoreco">
							<span class="cmdName">status re-connexion : </span>
							<div class="cmd cmd-widget tooltips autoconnect" data-type="info" data-subtype="numeric" data-cmd_id="#autoconnect_id#" data-cmd_uid="cmd#autoconnect_uid#" data-version="dashboard" data-template="default" data-eqlogic_id="#id#" title="Valeur du: #autoconnect_collectDate#">
								<div class="content-sm">
									<span class="iconoff"><i class="fas fa-times"></i></span>
									<span class="iconon"><i class="icon jeedom-prise"></i></span>
								</div>
							</div>
							<div class="cmd cmd-widget tooltips setautoconnect" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#setautoconnect_id#" data-cmd_uid="cmd#setautoconnect_uid#" data-version="dashboard" data-eqlogic_id="#id#">
								<div class="content-sm">
									<a class="btn btn-sm btn-default action">activer auto-reconnexion</a>
								</div>
							</div>
							<div class="cmd cmd-widget tooltips unsetautoconnect" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#unsetautoconnect_id#" data-cmd_uid="cmd#unsetautoconnect_uid#" data-version="dashboard" data-eqlogic_id="#id#">
								<div class="content-sm">
									<a class="btn btn-sm btn-default action">désactiver auto-reconnexion</a>
								</div>
							</div>
							<script>
								#uid#switch_reconnect('#autoconnect#');
								$('.cmd[data-cmd_id=#setautoconnect_id#]:last .action').off('click').on('click', function () {
									jeedom.cmd.execute({id: '#setautoconnect_id#'})
								})
								$('.cmd[data-cmd_id=#unsetautoconnect_id#]:last .action').off('click').on('click', function () {
									jeedom.cmd.execute({id: '#unsetautoconnect_id#'})
								})
								jeedom.cmd.addUpdateFunction('#autoconnect_id#',function(_options) {
									let cmd = $('.cmd[data-cmd_id=#autoconnect_id#]')
									cmd.attr('title', 'Valeur du: '+_options.valueDate)
									#uid#switch_reconnect(_options.display_value);
								});
							</script>
						</div>
						<div class="tooltips cmd cmd-widget" data-type="info" data-subtype="numeric" data-cmd_id="#printStatus_id#" data-cmd_uid="cmd#printStatus_uid#" data-version="dashboard" data-template="line" data-eqlogic_id="#id#" title="Valeur du: #printStatus_collectDate#">
							<div class="content-xs">
								<span   class="cmdName">print Status: </span>
								<strong class="state">#printStatus#</strong>
								<strong class="firstloginmsg"></strong>
							</div>
							<script>
								#uid#change_visibility_status('#printStatus#');
								jeedom.cmd.addUpdateFunction('#printStatus_id#',function(_options) {
									let cmd = $('.cmd[data-cmd_id=#printStatus_id#]');
									cmd.attr('title', 'Valeur du: '+_options.valueDate);
									cmd.find('.state').empty().append(_options.display_value);
									#uid#change_visibility_status(_options.display_value);
								});
							</script>
						</div>
						<div class="isconnected"><!--visible si connecter -->
							<div class="is3dprint is3ddoubleprint">
								<div class="cmd cmd-widget" data-type="action" data-subtype="slider" data-template="button" data-cmd_id="#offsetZ_id#" data-cmd_uid="#offsetZ_uid#" data-version="dashboard" data-eqlogic_id="678">
									<div class="title ">
										<div class="cmdName">offset</div>
									</div>
									<div class="content-sm ">
										<div class="input-group buttons">
										<span class="input-group-btn" style="position: relative;">
											<a class="btn btn-default btn-sm bt_minus roundedLeft"><i class="fas fa-minus"></i></a>
										</span>
										<input type="text" class="input-sm in_value form-control" value="">
										<span class="input-group-btn" style="position: relative;">
											<a class="btn btn-default btn-sm bt_plus roundedRight"><i class="fa fa-plus"></i></a>
										</span>
										</div>
									</div>
									<div class="cmd cmd-widget tooltips setzoffset" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#setzoffset_id#" data-cmd_uid="cmd#setzoffset_uid#" data-version="dashboard" data-eqlogic_id="#id#">
										<div class="content-sm">
											<a class="btn btn-sm btn-default action">set</a>
										</div>
									</div>
									<script>
										#uid#_set_value_zoffset(#offsetZ#)
										$('.cmd[data-cmd_id=#setzoffset_id#] .action').off('click').on('click', function () {
											#uid#_set_value_zoffset(parseFloat($('.cmd[data-cmd_id=#offsetZ_id#] .in_value').val()))
											jeedom.cmd.execute({id: '#setzoffset_id#', value: {message: parseFloat($('.cmd[data-cmd_id=#offsetZ_id#] .in_value').val()).toFixed(2)}});
										})
										$('.cmd[data-cmd_id=#offsetZ_id#] .bt_plus').on('click', function () {
											let max = 2
											let step = 0.05
											if (parseFloat($('.cmd[data-cmd_id=#offsetZ_id#] .in_value').val()) <= max - step ) {
												#uid#_set_value_zoffset(parseFloat($('.cmd[data-cmd_id=#offsetZ_id#] .in_value').val()) + step)
											}
										})
										$('.cmd[data-cmd_id=#offsetZ_id#] .bt_minus').on('click', function () {
											let min = -2
											let step = 0.05
											if (parseFloat($('.cmd[data-cmd_id=#offsetZ_id#] .in_value').val()) >= min + step) {
												#uid#_set_value_zoffset(parseFloat($('.cmd[data-cmd_id=#offsetZ_id#] .in_value').val()) - step)
											}
										})
										jeedom.cmd.addUpdateFunction('#offsetZ_id#',function(_options) {
											#uid#_set_value_zoffset(_options.display_value)
										});
									</script>
								</div>
							</div>
							<div class="cmd cmd-widget" data-type="action" data-subtype="slider" data-template="button" data-cmd_id="#saveworkSpeed_id#" data-cmd_uid="#saveworkSpeed_uid#" data-version="dashboard" data-eqlogic_id="678">
								<div class="title ">
									<div class="cmdName">vitesse</div>
								</div>
								<div class="content-sm ">
									<div class="input-group buttons">
									<span class="input-group-btn" style="position: relative;">
										<a class="btn btn-default btn-sm bt_minus roundedLeft"><i class="fas fa-minus"></i></a>
									</span>
									<input type="text" class="input-sm in_value form-control" value="">
									<span class="input-group-btn" style="position: relative;">
										<a class="btn btn-default btn-sm bt_plus roundedRight"><i class="fa fa-plus"></i></a>
									</span>
									</div>
								</div>
								<div class="cmd cmd-widget tooltips setspeed" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#setspeed_id#" data-cmd_uid="cmd#setspeed_uid#" data-version="dashboard" data-eqlogic_id="#id#">
									<div class="content-sm">
										<a class="btn btn-sm btn-default action">set</a>
									</div>
								</div>
								<script>
									#uid#_set_value_saveworkSpeed(parseFloat(#saveworkSpeed#))
									$('.cmd[data-cmd_id=#setspeed_id#] .action').off('click').on('click', function () {
										#uid#_set_value_saveworkSpeed(parseFloat($('.cmd[data-cmd_id=#saveworkSpeed_id#] .in_value').val()))
										jeedom.cmd.execute({id: '#setspeed_id#', value: {message: parseFloat($('.cmd[data-cmd_id=#saveworkSpeed_id#] .in_value').val()).toFixed(0)}});
									})
									$('.cmd[data-cmd_id=#saveworkSpeed_id#] .bt_plus').on('click', function () {
										let max = 200
										let step = 1
										if (parseFloat($('.cmd[data-cmd_id=#saveworkSpeed_id#] .in_value').val()) <= max - step ) {
											#uid#_set_value_saveworkSpeed(parseFloat($('.cmd[data-cmd_id=#saveworkSpeed_id#] .in_value').val()) + step)
										}
									})
									$('.cmd[data-cmd_id=#saveworkSpeed_id#] .bt_minus').on('click', function () {
										let min = 1
										let step = 1
										if (parseFloat($('.cmd[data-cmd_id=#saveworkSpeed_id#] .in_value').val()) >= min + step) {
											#uid#_set_value_saveworkSpeed(parseFloat($('.cmd[data-cmd_id=#saveworkSpeed_id#] .in_value').val()) - step)
										}
									})
									jeedom.cmd.addUpdateFunction('#saveworkSpeed_id#',function(_options) {
										#uid#_set_value_saveworkSpeed(parseFloat(_options.display_value))
									});
								</script>
							</div>
							<div class="isprintrunning"><!--visible si objet en cours d'impression -->
								<div class="cmd cmd-widget tooltips smpause" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#pause_id#" data-cmd_uid="cmd#pause_uid#" data-version="dashboard" data-eqlogic_id="#id#">
									<div class="content-xs">
										<a class="btn btn-sm btn-default action">pause</a>
									</div>
								</div>
								<div class="cmd cmd-widget tooltips smresume" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#resume_id#" data-cmd_uid="cmd#resume_uid#" data-version="dashboard" data-eqlogic_id="#id#">
									<div class="content-xs">
										<a class="btn btn-sm btn-default action">resume</a>
									</div>
								</div>
								<div class="cmd cmd-widget tooltips smstop" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#stop_id#" data-cmd_uid="cmd#stop_uid#" data-version="dashboard" data-eqlogic_id="#id#">
									<div class="content-xs">
										<a class="btn btn-sm btn-default action">stop</a>
									</div>
								</div>
								<script>
									$('.cmd[data-cmd_id=#pause_id#]:last .action').off('click').on('click', function () {
										jeedom.cmd.execute({id: '#pause_id#'})
										jeedom.cmd.execute({id: '#refresh_id#'})
									})
									$('.cmd[data-cmd_id=#resume_id#]:last .action').off('click').on('click', function () {
										jeedom.cmd.execute({id: '#resume_id#'})
										jeedom.cmd.execute({id: '#refresh_id#'})
									})
									$('.cmd[data-cmd_id=#stop_id#]:last .action').off('click').on('click', function () {
										jeedom.cmd.execute({id: '#stop_id#'})
										jeedom.cmd.execute({id: '#refresh_id#'})
									})
								</script>
								<div class="tooltips cmd cmd-widget" data-type="info" data-subtype="numeric" data-cmd_id="#fileName_id#" data-cmd_uid="cmd#fileName_uid#" data-version="dashboard" data-template="line" data-eqlogic_id="#id#" title="Valeur du: #fileName_collectDate#">
									<div class="content-xs">
										<span   class="cmdName">nom du fichier : </span>
										<strong class="state">#fileName#</strong>
									</div>
									<script>
										jeedom.cmd.addUpdateFunction('#fileName#',function(_options) {
											let cmd = $('.cmd[data-cmd_id=#fileName#]')
											cmd.attr('title', 'Valeur du: '+_options.valueDate)
											cmd.find('.state').empty().append(_options.display_value)
										});
									</script>
								</div>
								<div class="tooltips cmd cmd-widget" data-type="info" data-subtype="numeric" data-cmd_id="#progress_id#" data-cmd_uid="cmd#progress_uid#" data-version="dashboard" data-template="line" data-eqlogic_id="#id#" title="Valeur du: #progress_collectDate#">
									<div class="content-xs">
										<span   class="cmdName">avancement : </span>
										<strong class="state1"></strong>
										<strong class="state2"> %</strong>
									</div>
									<script>
										let progress#uid# = parseFloat(#progress#).toFixed(2)
										console.log(progress#uid#)
										if (progress#uid# == 'NaN') {
											progress#uid# = 0
										}
										$('.cmd[data-cmd_id=#progress_id#] .state1').empty().append(parseFloat(progress#uid#*100).toFixed(2))
										jeedom.cmd.addUpdateFunction('#progress_id#',function(_options) {
											let cmd = $('.cmd[data-cmd_id=#progress_id#]')
											cmd.attr('title', 'Valeur du: '+_options.valueDate)
											if (_options.display_value == '') {
												_options.display_value = 0
											}
											cmd.find('.state1').empty().append(parseFloat(_options.display_value*100).toFixed(2))
										});
									</script>
								</div>
								<div class="tooltips cmd cmd-widget" data-type="info" data-subtype="numeric" data-cmd_id="#currentLine_id#" data-cmd_uid="cmd#currentLine_uid#" data-version="dashboard" data-template="line" data-eqlogic_id="#id#" title="Valeur du: #currentLine_collectDate#">
									<div class="content-xs">
										<span   class="cmdName">ligne en cours: </span>
										<strong class="state1">#currentLine#</strong>
										<strong class="state2"> / </strong>
										<strong class="state3">#totalLines#</strong>
									</div>
									<script>
										jeedom.cmd.addUpdateFunction('#currentLine_id#',function(_options) {
											let cmd = $('.cmd[data-cmd_id=#currentLine_id#]')
											cmd.attr('title', 'Valeur du: '+_options.valueDate)
											cmd.find('.state1').empty().append(_options.display_value)
										});
										jeedom.cmd.addUpdateFunction('#totalLines_id#',function(_options) {
											let cmd = $('.cmd[data-cmd_id=#currentLine_id#]')
											cmd.attr('title', 'Valeur du: '+_options.valueDate)
											cmd.find('.state3').empty().append(_options.display_value)
										});
									</script>
								</div>
								<div class="tooltips cmd cmd-widget" data-type="info" data-subtype="numeric" data-cmd_id="#elapsedTime_id#" data-cmd_uid="cmd#elapsedTime_uid#" data-version="dashboard" data-template="line" data-eqlogic_id="#id#" title="Valeur du: #elapsedTime_collectDate#">
									<div class="content-xs">
										<span   class="cmdName">démarrer depuis: </span>
										<strong class="state"></strong>
									</div>
									<script>
										#uid#_set_value_Time($('.cmd[data-cmd_id=#elapsedTime_id#]'),#elapsedTime#)
										jeedom.cmd.addUpdateFunction('#elapsedTime_id#',function(_options) {
											let cmd = $('.cmd[data-cmd_id=#elapsedTime_id#]')
											cmd.attr('title', 'Valeur du: '+_options.valueDate)
											#uid#_set_value_Time(cmd,_options.display_value)
										});
									</script>
								</div>
								<div class="tooltips cmd cmd-widget" data-type="info" data-subtype="numeric" data-cmd_id="#remainingTime_id#" data-cmd_uid="cmd#remainingTime_uid#" data-version="dashboard" data-template="line" data-eqlogic_id="#id#" title="Valeur du: #remainingTime_collectDate#">
									<div class="content-xs">
										<span   class="cmdName">temps restant: </span>
										<strong class="state"></strong>
									</div>
									<script>
										#uid#_set_value_Time($('.cmd[data-cmd_id=#remainingTime_id#]'),#remainingTime#)
										jeedom.cmd.addUpdateFunction('#remainingTime_id#',function(_options) {
											let cmd = $('.cmd[data-cmd_id=#remainingTime_id#]')
											cmd.attr('title', 'Valeur du: '+_options.valueDate)
											#uid#_set_value_Time(cmd,_options.display_value)
										});
									</script>
								</div>
							</div>
						</div>
					</div>
				</div>
				<br/>
				<div class="menu-module">
					<div class="content-xs titre">
						<strong>MENU MODULE</strong>
					</div>
					<div class="contenue">
						<div class="tooltips cmd cmd-widget" data-type="info" data-subtype="numeric" data-cmd_id="#toolHead_id#" data-cmd_uid="cmd#toolHead_uid#" data-version="dashboard" data-template="line" data-eqlogic_id="#id#" title="Valeur du: #toolHead_collectDate#">
							<div class="content-xs">
								<span   class="cmdName">outil : </span>
								<strong class="state">#toolHead#</strong>
							</div>
							<script>
								#uid#change_visibility_toolhead('#toolHead#');
								jeedom.cmd.addUpdateFunction('#toolHead_id#',function(_options) {
									let cmd = $('.cmd[data-cmd_id=#toolHead_id#]')
									cmd.attr('title', 'Valeur du: '+_options.valueDate)
									cmd.find('.state').empty().append(_options.display_value)
									#uid#change_visibility_toolhead(_options.display_value);
								});
							</script>
						</div>
						<div class="tooltips cmd cmd-widget" data-type="info" data-subtype="numeric" data-cmd_id="#enclosure_id#" data-cmd_uid="cmd#enclosure_uid#" data-version="dashboard" data-template="line" data-eqlogic_id="#id#" title="Valeur du: #enclosure_collectDate#">
							<div class="content-xs">
								<span   class="cmdName">enclosure : </span>
								<strong class="state">#enclosure#</strong>
							</div>
							<script>
								#uid#switch_caisson('#enclosure#')
								jeedom.cmd.addUpdateFunction('#enclosure_id#',function(_options) {
									let cmd = $('.cmd[data-cmd_id=#enclosure_id#]')
									cmd.attr('title', 'Valeur du: '+_options.valueDate)
									cmd.find('.state').empty().append(_options.display_value)
									#uid#switch_caisson(_options.display_value)
								});
							</script>
						</div>
						<div class="tooltips cmd cmd-widget" data-type="info" data-subtype="numeric" data-cmd_id="#rotaryModule_id#" data-cmd_uid="cmd#rotaryModule_uid#" data-version="dashboard" data-template="line" data-eqlogic_id="#id#" title="Valeur du: #rotaryModule_collectDate#">
							<div class="content-xs">
								<span   class="cmdName">module rotatif : </span>
								<strong class="state">#rotaryModule#</strong>
							</div>
							<script>
								#uid#switch_rotate(#rotaryModule#)
								jeedom.cmd.addUpdateFunction('#rotaryModule_id#',function(_options) {
									let cmd = $('.cmd[data-cmd_id=#rotaryModule_id#]')
									cmd.attr('title', 'Valeur du: '+_options.valueDate)
									cmd.find('.state').empty().append(_options.display_value)
									#uid#switch_rotate(_options.display_value)
								});
							</script>
						</div>
						<div class="tooltips cmd cmd-widget" data-type="info" data-subtype="numeric" data-cmd_id="#emergencyStopButton_id#" data-cmd_uid="cmd#emergencyStopButton_uid#" data-version="dashboard" data-template="line" data-eqlogic_id="#id#" title="Valeur du: #emergencyStopButton_collectDate#">
							<div class="content-xs">
								<span   class="cmdName">bouton d'arret d'urgence : </span>
								<strong class="state">#emergencyStopButton#</strong>
							</div>
							<script>
								jeedom.cmd.addUpdateFunction('#emergencyStopButton_id#',function(_options) {
									let cmd = $('.cmd[data-cmd_id=#emergencyStopButton_id#]')
									cmd.attr('title', 'Valeur du: '+_options.valueDate)
									cmd.find('.state').empty().append(_options.display_value)
								});
							</script>
						</div>
						<div class="tooltips cmd cmd-widget" data-type="info" data-subtype="numeric" data-cmd_id="#airPurifier_id#" data-cmd_uid="cmd#airPurifier_uid#" data-version="dashboard" data-template="line" data-eqlogic_id="#id#" title="Valeur du: #airPurifier_collectDate#">
							<div class="content-xs">
								<span   class="cmdName">purificateur d'air : </span>
								<strong class="state">#airPurifier#</strong>
							</div>
							<script>
								jeedom.cmd.addUpdateFunction('#airPurifier_id#',function(_options) {
									let cmd = $('.cmd[data-cmd_id=#airPurifier_id#]')
									cmd.attr('title', 'Valeur du: '+_options.valueDate)
									cmd.find('.state').empty().append(_options.display_value)
								});
							</script>
						</div>
					</div>
					<br/>
				</div>
				<div class="menu-outil isconnected"><!--visible si connecter -->
					<div class="content-xs titre">
						<strong>MENU outil</strong>
					</div>
					<div class="contenue">
						<div class="is3dprint is3ddoubleprint"><!--visible si outil est imprimante3d -->
							<div class="cmd cmd-widget" data-type="info" data-subtype="numeric" data-cmd_id="#heatedBedTemperature_id#" data-cmd_uid="cmd#heatedBedTemperature_uid#" data-version="dashboard" data-template="line" data-eqlogic_id="#id#" title="Valeur du: #heatedBedTemperature_collectDate#">
								<div class="content-xs">
									<span   class="cmdName">Temperature du lit : </span> 
									<strong class="state1">#heatedBedTemperature#</strong>
									<strong class="state2"> °C</strong>
								</div>
								<script>
									jeedom.cmd.addUpdateFunction('#heatedBedTemperature_id#',function(_options) {
										let cmd = $('.cmd[data-cmd_id=#heatedBedTemperature_id#]')
										cmd.attr('title', 'Valeur du: '+_options.valueDate)
										cmd.find('.state1').empty().append(_options.display_value)
									});
								</script>
							</div>
							<div class="cmd cmd-widget" data-type="info" data-subtype="numeric" data-cmd_id="#nozzleTemperature_id#" data-cmd_uid="cmd#nozzleTemperature_uid#" data-version="dashboard" data-template="line" data-eqlogic_id="#id#" title="Valeur du: #nozzleTemperature_collectDate#">
								<div class="content-xs">
									<span   class="cmdName">Temperature buse : </span> 
									<strong class="state1">#nozzleTemperature#</strong>
									<strong class="state2"> °C</strong>
								</div>
								<script>
									jeedom.cmd.addUpdateFunction('#nozzleTemperature_id#',function(_options) {
										let cmd = $('.cmd[data-cmd_id=#nozzleTemperature_id#]')
										cmd.attr('title', 'Valeur du: '+_options.valueDate)
										cmd.find('.state1').empty().append(_options.display_value)
									});
								</script>
							</div>
							<div style="padding: 5px;" class="cmd cmd-widget" data-type="action" data-subtype="slider" data-template="button" data-cmd_id="#nozzleTargetTemperature_id#" data-cmd_uid="#nozzleTargetTemperature_uid#" data-version="dashboard" data-eqlogic_id="678">
								<div class="title ">
									<div class="cmdName">Temperature cible de la buse</div>
								</div>
								<div class="content-sm ">
									<div class="input-group buttons">
									<span class="input-group-btn" style="position: relative;">
										<a class="btn btn-default btn-sm bt_minus roundedLeft"><i class="fas fa-minus"></i></a>
									</span>
									<input type="text" class="input-sm in_value form-control" value="">
									<span class="input-group-btn" style="position: relative;">
										<a class="btn btn-default btn-sm bt_plus roundedRight"><i class="fa fa-plus"></i></a>
									</span>
									</div>
								</div>
								<div class="cmd cmd-widget tooltips settempnozzle" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#settempnozzle_id#" data-cmd_uid="cmd#settempnozzle_uid#" data-version="dashboard" data-eqlogic_id="#id#">
									<div class="content-sm">
										<a class="btn btn-sm btn-default action">set</a>
									</div>
								</div>
								<script>
									#uid#_set_value_nozzleTargetTemperature(#nozzleTargetTemperature#)
									$('.cmd[data-cmd_id=#settempnozzle_id#] .action').off('click').on('click', function () {
										#uid#_set_value_nozzleTargetTemperature(parseFloat($('.cmd[data-cmd_id=#nozzleTargetTemperature_id#] .in_value').val()))
										jeedom.cmd.execute({id: '#settempnozzle_id#', value: {message: parseFloat($('.cmd[data-cmd_id=#nozzleTargetTemperature_id#] .in_value').val()).toFixed(0)}});
									})
									$('.cmd[data-cmd_id=#nozzleTargetTemperature_id#] .bt_plus').on('click', function () {
										let max = 300
										let step = 1
										if (parseFloat($('.cmd[data-cmd_id=#nozzleTargetTemperature_id#] .in_value').val()) <= max - step ) {
											#uid#_set_value_nozzleTargetTemperature(parseFloat($('.cmd[data-cmd_id=#nozzleTargetTemperature_id#] .in_value').val()) + step)
										}
									})
									$('.cmd[data-cmd_id=#nozzleTargetTemperature_id#] .bt_minus').on('click', function () {
										let min = 0
										let step = 1
										if (parseFloat($('.cmd[data-cmd_id=#nozzleTargetTemperature_id#] .in_value').val()) >= min + step) {
											#uid#_set_value_nozzleTargetTemperature(parseFloat($('.cmd[data-cmd_id=#nozzleTargetTemperature_id#] .in_value').val()) - step)
										}
									})
									jeedom.cmd.addUpdateFunction('#nozzleTargetTemperature_id#',function(_options) {
										#uid#_set_value_nozzleTargetTemperature(_options.display_value)
									});
								</script>
							</div>
							<div style="padding: 5px;" class="cmd cmd-widget" data-type="action" data-subtype="slider" data-template="button" data-cmd_id="#heatedBedTargetTemperature_id#" data-cmd_uid="#heatedBedTargetTemperature_uid#" data-version="dashboard" data-eqlogic_id="678">
								<div class="title ">
									<div class="cmdName">Temperature cible du lit</div>
								</div>
								<div class="content-sm ">
									<div class="input-group buttons">
									<span class="input-group-btn" style="position: relative;">
										<a class="btn btn-default btn-sm bt_minus roundedLeft"><i class="fas fa-minus"></i></a>
									</span>
									<input type="text" class="input-sm in_value form-control" value="">
									<span class="input-group-btn" style="position: relative;">
										<a class="btn btn-default btn-sm bt_plus roundedRight"><i class="fa fa-plus"></i></a>
									</span>
									</div>
								</div>
								<div class="cmd cmd-widget tooltips settempbed" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#settempbed_id#" data-cmd_uid="cmd#settempbed_uid#" data-version="dashboard" data-eqlogic_id="#id#">
									<div class="content-sm">
										<a class="btn btn-sm btn-default action">set</a>
									</div>
								</div>
								<script>
									#uid#_set_value_heatedBedTargetTemperature(#heatedBedTargetTemperature#)
									$('.cmd[data-cmd_id=#settempbed_id#] .action').off('click').on('click', function () {
										#uid#_set_value_heatedBedTargetTemperature(parseFloat($('.cmd[data-cmd_id=#heatedBedTargetTemperature_id#] .in_value').val()))
										jeedom.cmd.execute({id: '#settempbed_id#', value: {message: parseFloat($('.cmd[data-cmd_id=#heatedBedTargetTemperature_id#] .in_value').val()).toFixed(0)}});
									})
									$('.cmd[data-cmd_id=#heatedBedTargetTemperature_id#] .bt_plus').on('click', function () {
										let max = 100
										let step = 1
										if (parseFloat($('.cmd[data-cmd_id=#heatedBedTargetTemperature_id#] .in_value').val()) <= max - step ) {
											#uid#_set_value_heatedBedTargetTemperature(parseFloat($('.cmd[data-cmd_id=#heatedBedTargetTemperature_id#] .in_value').val()) + step)
										}
									})
									$('.cmd[data-cmd_id=#heatedBedTargetTemperature_id#] .bt_minus').on('click', function () {
										let min = 0
										let step = 1
										if (parseFloat($('.cmd[data-cmd_id=#heatedBedTargetTemperature_id#] .in_value').val()) >= min + step) {
											#uid#_set_value_heatedBedTargetTemperature(parseFloat($('.cmd[data-cmd_id=#heatedBedTargetTemperature_id#] .in_value').val()) - step)
										}
									})
									jeedom.cmd.addUpdateFunction('#heatedBedTargetTemperature_id#',function(_options) {
										#uid#_set_value_heatedBedTargetTemperature(_options.display_value)
									});
								</script>
							</div>
							<div class="is3dprintpauseoridle"><!--visible si print idle ou pause -->
								<div class="cmd cmd-widget tooltips reload" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#reload_id#" data-cmd_uid="cmd#reload_uid#" data-version="dashboard" data-eqlogic_id="#id#">
									<div class="content-sm">
										<a class="btn btn-sm btn-default action">reload</a>
									</div>
								</div>
								<div class="cmd cmd-widget tooltips unload" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#unload_id#" data-cmd_uid="cmd#unload_uid#" data-version="dashboard" data-eqlogic_id="#id#">
									<div class="content-sm">
										<a class="btn btn-sm btn-default action">unload</a>
									</div>
								</div>
							</div>
							<script>
								$('.cmd[data-cmd_id=#reload_id#]:last .action').off('click').on('click', function () {
									jeedom.cmd.execute({id: '#reload_id#'})
								})
								$('.cmd[data-cmd_id=#unload_id#]:last .action').off('click').on('click', function () {
									jeedom.cmd.execute({id: '#unload_id#'})
								})
							</script>
							<div class="cmd cmd-widget tooltips isFilamentOut" data-type="info" data-subtype="numeric" data-cmd_id="#isFilamentOut_id#" data-cmd_uid="cmd#isFilamentOut_uid#" data-version="dashboard" data-template="line" data-eqlogic_id="#id#">
								<div class="content-sm">
									<span class="cmdName">Filament absent : </span>
									<strong class="state">#isFilamentOut#</strong>
								</div>
								<script>
									jeedom.cmd.addUpdateFunction('#isFilamentOut_id#',function(_options) {
										let cmd = $('.cmd[data-cmd_id=#isFilamentOut_id#]')
										cmd.attr('title', 'Valeur du: '+_options.valueDate)
										cmd.find('.state').empty().append(_options.display_value)
									});
								</script>
							</div>
						</div>
					</div>
				</div>
				<br/>
				<div class="isconnected">
					<div class="menu-caisson iscaissonon"><!--visible si caisson -->
						<div class="content-xs titre">
							<strong>MENU caisson</strong>
						</div>
						<div class="contenue">
							<div>
								<span   class="cmdName">lumière : </span>
								<div class="cmd cmd-widget tooltips led" data-type="info" data-subtype="numeric" data-cmd_id="#led_id#" data-cmd_uid="cmd#led_uid#" data-version="dashboard" data-template="default" data-eqlogic_id="#id#" title="Valeur du: #led_collectDate#">
									<div class="content-sm">
										<span class="iconoff"><i class="icon jeedom-lumiere-off"></i></span>
										<span class="iconon"><i class="icon jeedom-lumiere-on"></i></span>
									</div>
								</div>
								<div class="cmd cmd-widget tooltips setlight" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#setlight_id#" data-cmd_uid="cmd#setlight_uid#" data-version="dashboard" data-eqlogic_id="#id#">
									<div class="content-sm">
										<a class="btn btn-sm btn-default action">on</a>
									</div>
								</div>
								<div class="cmd cmd-widget tooltips unsetlight" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#unsetlight_id#" data-cmd_uid="cmd#unsetlight_uid#" data-version="dashboard" data-eqlogic_id="#id#">
									<div class="content-sm">
										<a class="btn btn-sm btn-default action">off</a>
									</div>
								</div>
								<script>
									function #uid#updatelight_but(stats) {
										if (stats == '0') { // en attente
											$('.cmd[data-cmd_id=#led_id#] .iconoff').show();
											$('.cmd[data-cmd_id=#led_id#] .iconon').hide();
											$('.cmd[data-cmd_id=#setlight_id#]').show();
											$('.cmd[data-cmd_id=#unsetlight_id#]').hide();
										} else if (stats == '100') { // en cours
											$('.cmd[data-cmd_id=#led_id#] .iconoff').hide();
											$('.cmd[data-cmd_id=#led_id#] .iconon').show();
											$('.cmd[data-cmd_id=#setlight_id#]').hide();
											$('.cmd[data-cmd_id=#unsetlight_id#]').show();
										} else { // pas de commande
											$('.cmd[data-cmd_id=#led_id#] .iconoff').hide();
											$('.cmd[data-cmd_id=#led_id#] .iconon').hide();
										}
									}
									#uid#updatelight_but('#led#');
									$('.cmd[data-cmd_id=#setlight_id#]:last .action').off('click').on('click', function () {
										jeedom.cmd.execute({id: '#setlight_id#'})
									})
									$('.cmd[data-cmd_id=#unsetlight_id#]:last .action').off('click').on('click', function () {
										jeedom.cmd.execute({id: '#unsetlight_id#'})
									})
									jeedom.cmd.addUpdateFunction('#led_id#',function(_options) {
										let cmd = $('.cmd[data-cmd_id=#led_id#]')
										cmd.attr('title', 'Valeur du: '+_options.valueDate)
										#uid#updatelight_but(_options.display_value);
									});
								</script>
							</div>
							<div>
								<span   class="cmdName">ventilation : </span>
								<div class="cmd cmd-widget tooltips fan" data-type="info" data-subtype="numeric" data-cmd_id="#fan_id#" data-cmd_uid="cmd#fan_uid#" data-version="dashboard" data-template="default" data-eqlogic_id="#id#" title="Valeur du: #fan_collectDate#">
									<div class="content-sm">
										<span class="iconoff"><i class="fas fa-times"></i></span>
										<span class="iconon"><i class="fas fa-fan"></i></span>
									</div>
								</div>
								<div class="cmd cmd-widget tooltips setfan" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#setfan_id#" data-cmd_uid="cmd#setfan_uid#" data-version="dashboard" data-eqlogic_id="#id#">
									<div class="content-sm">
										<a class="btn btn-sm btn-default action">on</a>
									</div>
								</div>
								<div class="cmd cmd-widget tooltips unsetfan" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#unsetfan_id#" data-cmd_uid="cmd#unsetfan_uid#" data-version="dashboard" data-eqlogic_id="#id#">
									<div class="content-sm">
										<a class="btn btn-sm btn-default action">off</a>
									</div>
								</div>
								<script>
									function #uid#updatefan_but(stats) {
										if (stats == '0') { // en attente
											$('.cmd[data-cmd_id=#fan_id#] .iconoff').show();
											$('.cmd[data-cmd_id=#fan_id#] .iconon').hide();
											$('.cmd[data-cmd_id=#setfan_id#]').show();
											$('.cmd[data-cmd_id=#unsetfan_id#]').hide();
										} else if (stats == '1') { // en cours
											$('.cmd[data-cmd_id=#fan_id#] .iconoff').hide();
											$('.cmd[data-cmd_id=#fan_id#] .iconon').show();
											$('.cmd[data-cmd_id=#setfan_id#]').hide();
											$('.cmd[data-cmd_id=#unsetfan_id#]').show();
										} else { // pas de commande
											$('.cmd[data-cmd_id=#fan_id#] .iconoff').hide();
											$('.cmd[data-cmd_id=#fan_id#] .iconon').hide();
										}
									}
									#uid#updatefan_but('#fan#');
									$('.cmd[data-cmd_id=#setfan_id#]:last .action').off('click').on('click', function () {
										jeedom.cmd.execute({id: '#setfan_id#'})
									})
									$('.cmd[data-cmd_id=#unsetfan_id#]:last .action').off('click').on('click', function () {
										jeedom.cmd.execute({id: '#unsetfan_id#'})
									})
									jeedom.cmd.addUpdateFunction('#fan_id#',function(_options) {
										let cmd = $('.cmd[data-cmd_id=#fan_id#]')
										cmd.attr('title', 'Valeur du: '+_options.valueDate)
										#uid#updatefan_but(_options.display_value);
									});
								</script>
							</div>
							<div>
								<span   class="cmdName">pause si caisson ouvert : </span>
								<div class="cmd cmd-widget tooltips stopIfEnclosureDoorOpen" data-type="info" data-subtype="numeric" data-cmd_id="#stopIfEnclosureDoorOpen_id#" data-cmd_uid="cmd#stopIfEnclosureDoorOpen_uid#" data-version="dashboard" data-template="default" data-eqlogic_id="#id#" title="Valeur du: #stopIfEnclosureDoorOpen_collectDate#">
									<div class="content-sm">
										<span class="iconoff"><i class="icon jeedom-lumiere-off"></i></span>
										<span class="iconon"><i class="icon jeedom-lumiere-on"></i></span>
									</div>
								</div>
								<div class="cmd cmd-widget tooltips setpauseifopen" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#setpauseifopen_id#" data-cmd_uid="cmd#setpauseifopen_uid#" data-version="dashboard" data-eqlogic_id="#id#">
									<div class="content-sm">
										<a class="btn btn-sm btn-default action">on</a>
									</div>
								</div>
								<div class="cmd cmd-widget tooltips unsetpauseifopen" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#unsetpauseifopen_id#" data-cmd_uid="cmd#unsetpauseifopen_uid#" data-version="dashboard" data-eqlogic_id="#id#">
									<div class="content-sm">
										<a class="btn btn-sm btn-default action">off</a>
									</div>
								</div>
								<span   class="cmdName">etat caisson : </span>
								<div class="cmd cmd-widget tooltips isEnclosureDoorOpen" data-type="info" data-subtype="numeric" data-cmd_id="#isEnclosureDoorOpen_id#" data-cmd_uid="cmd#isEnclosureDoorOpen_uid#" data-version="dashboard" data-template="default" data-eqlogic_id="#id#" title="Valeur du: #isEnclosureDoorOpen_collectDate#">
									<div class="content-sm">
										<span class="iconoff"><i class="fas fa-door-closed"></i></span>
										<span class="iconon"><i class="fas fa-door-open"></i></span>
									</div>
								</div>
								<script>
									function #uid#updatsifopen_but(stats) {
										if (stats == '0') { // en attente
											$('.cmd[data-cmd_id=#stopIfEnclosureDoorOpen_id#] .iconoff').show();
											$('.cmd[data-cmd_id=#stopIfEnclosureDoorOpen_id#] .iconon').hide();
											$('.cmd[data-cmd_id=#setpauseifopen_id#]').show();
											$('.cmd[data-cmd_id=#unsetpauseifopen_id#]').hide();

										} else if (stats == '1') { // en cours
											$('.cmd[data-cmd_id=#stopIfEnclosureDoorOpen_id#] .iconoff').hide();
											$('.cmd[data-cmd_id=#stopIfEnclosureDoorOpen_id#] .iconon').show();
											$('.cmd[data-cmd_id=#setpauseifopen_id#]').hide();
											$('.cmd[data-cmd_id=#unsetpauseifopen_id#]').show();
										} else { // pas de commande
											$('.cmd[data-cmd_id=#stopIfEnclosureDoorOpen_id#] .iconoff').hide();
											$('.cmd[data-cmd_id=#stopIfEnclosureDoorOpen_id#] .iconon').hide();
										}
									}
									#uid#updatsifopen_but('#stopIfEnclosureDoorOpen#');
									$('.cmd[data-cmd_id=#setpauseifopen_id#]:last .action').off('click').on('click', function () {
										jeedom.cmd.execute({id: '#setpauseifopen_id#'})
									})
									$('.cmd[data-cmd_id=#unsetpauseifopen_id#]:last .action').off('click').on('click', function () {
										jeedom.cmd.execute({id: '#unsetpauseifopen_id#'})
									})
									jeedom.cmd.addUpdateFunction('#stopIfEnclosureDoorOpen_id#',function(_options) {
										let cmd = $('.cmd[data-cmd_id=#stopIfEnclosureDoorOpen_id#]')
										cmd.attr('title', 'Valeur du: '+_options.valueDate)
										#uid#updatsifopen_but(_options.display_value);
									});
								</script>
								<script>
									function #uid#updatsisopen_but(stats) {
										if (stats == '0') { // en attente
											$('.cmd[data-cmd_id=#isEnclosureDoorOpen_id#] .iconoff').show();
											$('.cmd[data-cmd_id=#isEnclosureDoorOpen_id#] .iconon').hide();
										} else if (stats == '1') { // en cours
											$('.cmd[data-cmd_id=#isEnclosureDoorOpen_id#] .iconoff').hide();
											$('.cmd[data-cmd_id=#isEnclosureDoorOpen_id#] .iconon').show();
										} else { // pas de commande
											$('.cmd[data-cmd_id=#isEnclosureDoorOpen_id#] .iconoff').hide();
											$('.cmd[data-cmd_id=#isEnclosureDoorOpen_id#] .iconon').hide();
										}
									}
									#uid#updatsisopen_but('#isEnclosureDoorOpen#');
									jeedom.cmd.addUpdateFunction('#isEnclosureDoorOpen_id#',function(_options) {
										let cmd = $('.cmd[data-cmd_id=#isEnclosureDoorOpen_id#]')
										cmd.attr('title', 'Valeur du: '+_options.valueDate)
										#uid#updatsisopen_but(_options.display_value);
									});
								</script>
							</div>
						</div>
					</div>
				</div>
				<br/>
				<div class="menu-alim isaliminfo"><!--visible si info alim existe-->
					<div class="content-xs titre">
						<strong>MENU alimentation</strong>
					</div>
					<div class="contenue">
						<div class="cmd cmd-widget tooltips smalimon" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#onalim_id#" data-cmd_uid="cmd#onalim_uid#" data-version="dashboard" data-eqlogic_id="#id#">
							<div class="content-sm">
								<a class="btn btn-sm btn-default action">on</a>
							</div>
						</div>
						<div class="cmd cmd-widget tooltips smalimoff" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#offalim_id#" data-cmd_uid="cmd#offalim_uid#" data-version="dashboard" data-eqlogic_id="#id#">
							<div class="content-sm">
								<a class="btn btn-sm btn-default action">off</a>
							</div>
						</div>
						<div class="cmd cmd-widget tooltips smalimstatus" data-type="info" data-subtype="numeric" data-cmd_id="#aliminfo_id#" data-cmd_uid="cmd#aliminfo_uid#" data-version="dashboard" data-template="default" data-eqlogic_id="#id#" title="Valeur du: #aliminfo_collectDate#">
							<div class="content-sm">
								<span class="iconoff"><i class="fas fa-times"></i></span>
								<span class="iconon"><i class="icon jeedom-prise"></i></span>
							</div>
						</div>
						<script>
							#uid#switch_alim('#aliminfo#');
							$('.cmd[data-cmd_id=#onalim_id#]:last .action').off('click').on('click', function () {
								jeedom.cmd.execute({id: '#onalim_id#'})
							})
							$('.cmd[data-cmd_id=#offalim_id#]:last .action').off('click').on('click', function () {
								status_print = $('.cmd[data-cmd_id=#printStatus_id#] .state').val()
								if (status_print == "RUNNING") {
									$.fn.showAlert({
										message: 'impossible d\'éteindre l\'alimentation en cours d\'impression',
										level: 'danger'
									})
								} else {
									jeedom.cmd.execute({id: '#offalim_id#'})
								}
							})
							jeedom.cmd.addUpdateFunction('#aliminfo_id#',function(_options) {
								let cmd = $('.cmd[data-cmd_id=#aliminfo_id#]')
								cmd.attr('title', 'Valeur du: '+_options.valueDate)
								#uid#switch_alim(_options.display_value);
							});
						</script>
					</div>
					<br/>
					<div class="isconnected">
						<div class="isprintrunning">
							<div class="autoshutdown">
								<span class="cmdName">status re-connexion : </span>
								<div class="cmd cmd-widget tooltips autoshutdown" data-type="info" data-subtype="numeric" data-cmd_id="#autoshutdown_id#" data-cmd_uid="cmd#autoshutdown_uid#" data-version="dashboard" data-template="default" data-eqlogic_id="#id#" title="Valeur du: #autoshutdown_collectDate#">
									<div class="content-sm">
										<span class="iconoff"><i class="fas fa-times"></i></span>
										<span class="iconon"><i class="icon jeedom-prise"></i></span>
									</div>
								</div>
								<div class="cmd cmd-widget tooltips setautoshutdown" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#setautoshutdown_id#" data-cmd_uid="cmd#setautoshutdown_uid#" data-version="dashboard" data-eqlogic_id="#id#">
									<div class="content-sm">
										<a class="btn btn-sm btn-default action">activer auto-shutdown si programme terminer</a>
									</div>
								</div>
								<div class="cmd cmd-widget tooltips unsetautoshutdown" data-type="action" data-subtype="other" data-template="default" data-cmd_id="#unsetautoshutdown_id#" data-cmd_uid="cmd#unsetautoshutdown_uid#" data-version="dashboard" data-eqlogic_id="#id#">
									<div class="content-sm">
										<a class="btn btn-sm btn-default action">désactiver auto-shutdown si programme terminer</a>
									</div>
								</div>
								<script>
									#uid#switch_shutdown('#autoshutdown#');
									$('.cmd[data-cmd_id=#setautoshutdown_id#]:last .action').off('click').on('click', function () {
										jeedom.cmd.execute({id: '#setautoshutdown_id#'})
									})
									$('.cmd[data-cmd_id=#unsetautoshutdown_id#]:last .action').off('click').on('click', function () {
										jeedom.cmd.execute({id: '#unsetautoshutdown_id#'})
									})
									jeedom.cmd.addUpdateFunction('#autoshutdown_id#',function(_options) {
										let cmd = $('.cmd[data-cmd_id=#autoshutdown_id#]')
										cmd.attr('title', 'Valeur du: '+_options.valueDate)
										#uid#switch_shutdown(_options.display_value);
									});
								</script>
							</div>
						</div>
					</div>
				</div>
			</div> <!-- Pan_menu -->
			<div class="Pan_fichier" style="display: none;">
				<div class="content-xs">
					<strong>LISTE FICHIER</strong>
				</div>
				<div class="tooltips cmd cmd-widget filelist" data-type="info" data-subtype="string" data-version="dashboard" data-template="default" data-eqlogic_id="#filelist_id#" style="display: block;">
					<div style="max-width: #widthfilelist#px; min-width: #widthfilelist#px; max-height: #heightfilelist#px; min-height: #heightfilelist#px; overflow:auto;">
						<div class="state">
						</div>
					</div>
					<script>
						jeedom.cmd.addUpdateFunction('#filelist_id#',function(_options) {
							let headtable = ["nom","taille","date","outil"];
							let commande = [];
							#uid#js_snapmaker_printhtmltable(_options.display_value,'#filelist_id#',headtable,commande);
						});
						jeedom.cmd.refreshValue([{cmd_id :'#filelist_id#',display_value:"#filelist#", valueDate: '#filelist_valueDate#', collectDate: '#filelist_collectDate#', alertLevel: '#filelist_alertLevel#'}]);
					</script>
				</div>
				<div class="tooltips cmd cmd-widget fileselect" style="display: block;">
					<div style="display: flex; justify-content: space-around;">
						<div style="display: flex; flex-wrap: wrap; justify-content: space-around;">
							<div class="cmd cmd-widget fileselectname">
								<div class="content-xs">
									<span   class="cmdName">nom : </span> 
									<strong class="state"></strong>
								</div>
							</div>
							<div class="cmd cmd-widget fileselectdate">
								<div class="content-xs">
									<span   class="cmdName">date d'insertion : </span> 
									<strong class="state"></strong>
								</div>
							</div>
							<div class="cmd cmd-widget fileselecttaille">
								<div class="content-xs">
									<span   class="cmdName">taille : </span> 
									<strong class="state"></strong>
								</div>
							</div>
							<div class="cmd cmd-widget fileselectligne">
								<div class="content-xs">
									<span   class="cmdName">nbr de commandes : </span> 
									<strong class="state"></strong>
								</div>
							</div>
							<div class="cmd cmd-widget fileselecttemps">
								<div class="content-xs">
									<span   class="cmdName">temps de travail : </span> 
									<strong class="state"></strong>
								</div>
							</div>
							<div class="cmd cmd-widget fileselecttype">
								<div class="content-xs">
									<span   class="cmdName">machine : </span> 
									<strong class="state"></strong>
								</div>
							</div>
							<div class="cmd cmd-widget fileselecttool">
								<div class="content-xs">
									<span   class="cmdName">outil : </span> 
									<strong class="state"></strong>
								</div>
							</div>
							<div class="cmd cmd-widget fileselectrotate">
								<div class="content-xs">
									<span   class="cmdName">axe rotatif : </span> 
									<strong class="state"></strong>
								</div>
							</div>
							<div class="cmd cmd-widget fileselectimage" style="position: relative;">
								<div class="content-xs">
									<span   class="cmdName">image : </span>
									<img class="state" src="" style="width: 100px; height: 100px; max-width: 100%; transition: transform 0.3s ease;">
								</div>
							</div>
						</div>
					</div>
					<div class="content-xs">
						<a class="btn btn-sm btn-default deletefile" disabled>delete</a>
						<a class="btn btn-sm btn-default start" disabled>start</a>
						<a class="btn btn-sm btn-default download" download="" disabled>download</a>
						<a class="btn btn-sm btn-default upsnap" disabled>upload snap</a>
						<span class="btn btn-default btn-file" style="width:100%;">
							<i class="fas fa-cloud-upload-alt"></i>Ajouter un fichier<input id="bt_uploadgcode" type="file" name="file" accept=".gcode, .nc, .cnc" data-url="plugins/snapmaker/core/ajax/snapmaker.ajax.php?action=upload&id=#id#">
						</span>
					</div>
				</div>
				<div class="tooltips cmd cmd-widget newfile" data-type="action" data-subtype="message" data-cmd_id="#sendfile_id#" data-cmd_uid="cmd#sendfile_uid#" data-version="dashboard" data-template="default" data-eqlogic_id="#id#">
					<script>
						$('.eqLogic[data-eqlogic_id=#id#]:last .fileselect .deletefile').on('click', function() {
							var fileName = $('.eqLogic[data-eqlogic_id=#id#]:last .fileselect .fileselectname .state').text();
							$.ajax({
								type: "POST",
								url: "plugins/snapmaker/core/ajax/snapmaker.ajax.php",
								data: { action:'delete', id: '#id#', file: fileName },
								success: function(response) {
									jeedom.cmd.execute({id: '#refresh_id#'});
								},
								error: function (request, status, error) {
									handleAjaxError(request, status, error);
								}
							});
						});
						$('.eqLogic[data-eqlogic_id=#id#]:last .fileselect .start').on('click', function() {
							var fileName = $('.eqLogic[data-eqlogic_id=#id#]:last .fileselect .fileselectname .state').text();
							jeedom.cmd.execute({id: '#start_id#', value: {message: fileName}});
						});
						$('.eqLogic[data-eqlogic_id=#id#]:last .fileselect .download').on('click', function() {
							var fileName = $('.eqLogic[data-eqlogic_id=#id#]:last .fileselect .fileselectname .state').text();
							$.ajax({
								type: "GET",
								url: "plugins/snapmaker/core/ajax/snapmaker.ajax.php",
								data: { action:'download', id: '#id#', file: fileName },
								contentType: "application/json",
								complete: function(response) {
									var link = document.createElement("a");
									// retire les caractere après "GCode end"
									link.href = "data:application/octet-stream," + encodeURIComponent(response.responseText.split("{\"state\":\"")[0]);
									link.download = fileName;
									link.style.display = "none";
									document.body.appendChild(link);
									link.click();
									document.body.removeChild(link);
								}
							});
						});
						$('.eqLogic[data-eqlogic_id=#id#]:last .fileselect .upsnap').on('click', function() {
							var fileName = $('.eqLogic[data-eqlogic_id=#id#]:last .fileselect .fileselectname .state').text();
							jeedom.cmd.execute({id: '#sendfile_id#', value: {message: fileName}});
						});
						$('#bt_uploadgcode').fileupload({
							dataType: 'json',
							replaceFileInput: false,
							done: function(e, data) {
								if (data.result.state != 'ok') {
									$.fn.showAlert({
										message: data.result.result,
										level: 'danger'
									})
									return
								}
								jeedom.cmd.execute({id: '#refresh_id#'});
								$.fn.showAlert({
									message: 'Fichier(s) ajouté(s) avec succès',
									level: 'success'
								})
							}
						});
						let imageElement#uid# = $('.eqLogic[data-eqLogic_id=#id#] .fileselect .fileselectimage .state')[0];
						let isZoomed#uid# = false;
						imageElement#uid#.addEventListener("click", function() {
						if (isZoomed#uid#) {
							imageElement#uid#.style.transform = "scale(1)";
							isZoomed#uid# = false;
						} else {
							imageElement#uid#.style.transform = "scale(2)";
							isZoomed#uid# = true;
						}
						});
					</script>
				</div>
			</div>  <!-- Pan_fichier -->
			<div class="Pan_axes" style="display: none;">
				<div class="content-xs">
					<strong>GESTION DES AXES</strong>
				</div>
				<div class="tooltips cmd cmd-widget axesarrow" data-type="info" data-subtype="string" data-version="dashboard" data-template="default" style="display: block;">
					<div style="max-width: #widthfilelist#px; max-height: #heightfilelist#px;">
						<table style="border: none; ">
							<tr>
								<td ><button class="" hidden><i class=""></i></button></td>
								<td ><button class="ymax"><i class="fa fa-arrow-up fa-5x"></i></button></td>
								<td ><button class="" hidden><i class="" ></i></button></td>
								<td ><button class="up"><i class="fa fa-arrow-up fa-5x"></i></button></td>
								<td ><button class="inserte1 is3dprint is3ddoubleprint"><i class="fa fa-plus fa-5x"></i></button></td>
								<td ><button class="inserte2 is3ddoubleprint"><i class="fa fa-plus fa-5x"></i></button></td>
								<td ><button class="axe_horaire isrotateon"><i class="fa fa-undo fa-5x fa-flip-horizontal"></i></button></td>
								<td rowspan="3" style="width:75px;" class="position-relative">
									<div class="h-80">
										<div class="text-center">vitesse</div>
										<input type="range" class="vertical-range sliderspeedValue" min="100" max="12000" value="6400" step="100" oninput="#uid#updateRangeValue(this,'sliderspeedtext','')">
										<div class="text-center sliderspeedtext">6400</div>
									</div>
								</td>
								<td rowspan="3" style="width:75px;" class="position-relative islaser iscnc">
									<div class="h-80">
										<div class="text-center">puissance</div>
										<input type="range" class="vertical-range sliderpowerValue" min="10" max="50" value="30" oninput="#uid#updateRangeValue(this,'sliderpowertext',' %')" onmouseup="#uid#onRangeRelease(this)">
										<div class="text-center sliderpowertext">30 %</div>
										<div class="text-center">
											<button class="button" onclick="#uid#onRangeRelease(this,'off')">off</button>
										</div>
									</div>
								</td>
							</tr>
							<tr>
								<td style="text-align: right;"><button class="left"><i class="fa fa-arrow-left fa-5x"></i></button></td>
								<td class="text-center">XY</td>
								<td ><button class="right"><i class="fa fa-arrow-right fa-5x"></i></button></td>
								<td class="text-center">Z</td>
								<td class="text-center is3dprint is3ddoubleprint">E1</td>
								<td class="text-center is3ddoubleprint">E2</td>
								<td class="text-center isrotateon">O</td>
								
							</tr>
							<tr>
								<td ><button class="home"><i class="fa fa-home fa-4x"></i></button></td>
								<td ><button class="ymin"><i class="fa fa-arrow-down fa-5x"></i></button></td>
								<td ><button class="" hidden><i class="fa fa-arrow fa-5x"></i></button></td>
								<td ><button class="down"><i class="fa fa-arrow-down fa-5x"></i></button></td>
								<td ><button class="retracte1 is3dprint is3ddoubleprint"><i class="fa fa-minus fa-5x"></i></button></td>
								<td ><button class="retracte2 is3ddoubleprint"><i class="fa fa-minus fa-5x"></i></button></td>
								<td ><button class="axe_antihoraire isrotateon"><i class="fa fa-undo fa-5x"></i></button></td>
							</tr>
						</table>
						<div style="display: flex; justify-content: space-around;">
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="radio" name="Radiosdistance#id#" value="0.1" checked>
								<label class="form-check-label">
									0.1mm
								</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="radio" name="Radiosdistance#id#" value="0.5">
								<label class="form-check-label">
									0.5mm
								</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="radio" name="Radiosdistance#id#" value="1">
								<label class="form-check-label">
									1mm
								</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="radio" name="Radiosdistance#id#" value="10">
								<label class="form-check-label">
									10mm
								</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="radio" name="Radiosdistance#id#" value="50">
								<label class="form-check-label">
									50mm
								</label>
							</div>
						</div>
						<div class="tooltips cmd cmd-widget execcomande" data-type="action" data-subtype="message" data-cmd_id="#execcomande_id#" data-cmd_uid="cmd#execcomande_uid#" data-version="dashboard" data-template="default" data-eqlogic_id="#id#">
							<div class="content-lg">
								<textarea class="form-control input-sm message" rows="1" placeholder="Commande" data-cmd_id="#execcomande_id#" data-cmd_uid="cmd#execcomande_uid#"></textarea>
								<a class="btn btn-xs execute">envoyer</a>
							</div>
							<script>
								$('.cmd[data-cmd_id=#execcomande_id#]:last .execute').on('click', function() {
									jeedom.cmd.execute({id: '#execcomande_id#', value: {message: $('.cmd[data-cmd_id=#execcomande_id#] .message').value()}});
									// vide le champ de saisie du message
									$('.cmd[data-cmd_id=#execcomande_id#] .message').val('');
								});
								function #uid#updateRangeValue(input,namedisplay,unit) {
									$('.eqLogic[data-eqLogic_uid=#uid#]:last .' + namedisplay).text(input.value + unit);
								}
								function #uid#onRangeRelease(input,cut = '') {
									if (global_#uid#_toolhead == "laser") {
										if (cut != '') {
											jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "M5"}}); // laser off
										} else {
											jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "M3 P" + input.value + " S" + Math.round(input.value * 2.55)}}); // laser on
										}
									} else if (global_#uid#_toolhead == "cnc") {
										if (cut != '') {
											jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "M5"}}); // laser off
										} else {
											jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "M3 P" + input.value}}); // laser on
										}
									}
								}
							</script>
						</div>
						<div class="iscnc islaser">
							<div style="max-width: #widthfilelist#px; max-height: #heightfilelist#px;">
								<table style="border: none; ">
									<tr>
										<td>set origin</td>
										<td><button class="button" onclick="#uid#setworkorigin('home')">home origin</button></td>
										<td><button class="button" onclick="#uid#setworkorigin('X')">X origin</button></td>
										<td><button class="button" onclick="#uid#setworkorigin('Y')">Y origin</button></td>
										<td><button class="button" onclick="#uid#setworkorigin('Z')">Z origin</button></td>
										<td class="isrotateon"><button class="button" onclick="#uid#setworkorigin('B')">axe origin</button></td>
									</tr>
									<tr>
										<td>go to origin</td>
										<td><button class="button" onclick="#uid#gotoworkorigin('home')">home origin</button></td>
										<td><button class="button" onclick="#uid#gotoworkorigin('X')">X origin</button></td>
										<td><button class="button" onclick="#uid#gotoworkorigin('Y')">Y origin</button></td>
										<td><button class="button" onclick="#uid#gotoworkorigin('Z')">Z origin</button></td>
										<td class="isrotateon"><button class="button" onclick="#uid#gotoworkorigin('B')">axe origin</button></td>
									</tr>
								</table>
							</div>
							<script>
								function #uid#setworkorigin(axis) { // set work origin
									jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G90"}});
									if (axis == "home") {
										jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G92 X0 Y0 Z0 B0"}});
									} else {
										jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G92 " + axis + "0"}});
									}
								}
								function #uid#gotoworkorigin(axis) { // go to work origin
									jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G90"}});
									if (axis == "home") {
										jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G0 X0 Y0 Z0 B0 F" + $('.eqLogic[data-eqLogic_uid=#uid#]:last .sliderspeedValue').value()}});
									} else {
										jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G0 " + axis + "0 F" + $('.eqLogic[data-eqLogic_uid=#uid#]:last .sliderspeedValue').value()}});
									}
								}
							</script>
						</div>
						<script>
							$('.eqLogic[data-eqLogic_uid=#uid#]:last .home').off('click').on('click', function () {
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G28"}}); // home
							})
							$('.eqLogic[data-eqLogic_uid=#uid#]:last .left').off('click').on('click', function () {
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G91"}}); // mode relatif
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G1 F" + $('.eqLogic[data-eqLogic_uid=#uid#]:last .sliderspeedValue').value() + " X-" + $('input[name=Radiosdistance#id#]:checked').val()}}); // deplacement
							})
							$('.eqLogic[data-eqLogic_uid=#uid#]:last .right').off('click').on('click', function () {
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G91"}}); // mode relatif
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G1 F" + $('.eqLogic[data-eqLogic_uid=#uid#]:last .sliderspeedValue').value() + " X+" + $('input[name=Radiosdistance#id#]:checked').val()}}); // deplacement
							})

							$('.eqLogic[data-eqLogic_uid=#uid#]:last .ymax').off('click').on('click', function () {
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G91"}}); // mode relatif
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G1 F" + $('.eqLogic[data-eqLogic_uid=#uid#]:last .sliderspeedValue').value() + " Y+" + $('input[name=Radiosdistance#id#]:checked').val()}}); // deplacement
							})
							$('.eqLogic[data-eqLogic_uid=#uid#]:last .ymin').off('click').on('click', function () {
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G91"}}); // mode relatif
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G1 F" + $('.eqLogic[data-eqLogic_uid=#uid#]:last .sliderspeedValue').value() + " Y-" + $('input[name=Radiosdistance#id#]:checked').val()}}); // deplacement
							})

							$('.eqLogic[data-eqLogic_uid=#uid#]:last .up').off('click').on('click', function () {
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G91"}}); // mode relatif
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G1 F" + $('.eqLogic[data-eqLogic_uid=#uid#]:last .sliderspeedValue').value() + " Z+" + $('input[name=Radiosdistance#id#]:checked').val()}}); // deplacement
							})
							$('.eqLogic[data-eqLogic_uid=#uid#]:last .down').off('click').on('click', function () {
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G91"}}); // mode relatif
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G1 F" + $('.eqLogic[data-eqLogic_uid=#uid#]:last .sliderspeedValue').value() + " Z-" + $('input[name=Radiosdistance#id#]:checked').val()}}); // deplacement
							})

							$('.eqLogic[data-eqLogic_uid=#uid#]:last .inserte1').off('click').on('click', function () {
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G91"}}); // mode relatif
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G1 T0 F" + $('.eqLogic[data-eqLogic_uid=#uid#]:last .sliderspeedValue').value() + " E+" + $('input[name=Radiosdistance#id#]:checked').val()}}); // deplacement
							})
							$('.eqLogic[data-eqLogic_uid=#uid#]:last .inserte2').off('click').on('click', function () {
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G91"}}); // mode relatif
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G1 T1 F" + $('.eqLogic[data-eqLogic_uid=#uid#]:last .sliderspeedValue').value() + " E+" + $('input[name=Radiosdistance#id#]:checked').val()}}); // deplacement
							})
							$('.eqLogic[data-eqLogic_uid=#uid#]:last .retracte1').off('click').on('click', function () {
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G91"}}); // mode relatif
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G1 T0 F" + $('.eqLogic[data-eqLogic_uid=#uid#]:last .sliderspeedValue').value() + " E-" + $('input[name=Radiosdistance#id#]:checked').val()}}); // deplacement
							})
							$('.eqLogic[data-eqLogic_uid=#uid#]:last .retracte2').off('click').on('click', function () {
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G91"}}); // mode relatif
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G1 T1 F" + $('.eqLogic[data-eqLogic_uid=#uid#]:last .sliderspeedValue').value() + " E-" + $('input[name=Radiosdistance#id#]:checked').val()}}); // deplacement
							})
							$('.eqLogic[data-eqLogic_uid=#uid#]:last .axe_horaire').off('click').on('click', function () {
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G91"}}); // mode relatif
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G1 F" + $('.eqLogic[data-eqLogic_uid=#uid#]:last .sliderspeedValue').value() + " B+" + $('input[name=Radiosdistance#id#]:checked').val()}}); // deplacement
							})
							$('.eqLogic[data-eqLogic_uid=#uid#]:last .axe_antihoraire').off('click').on('click', function () {
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G91"}}); // mode relatif
								jeedom.cmd.execute({id: '#execcomande_id#', value: {message: "G1 F" + $('.eqLogic[data-eqLogic_uid=#uid#]:last .sliderspeedValue').value() + " B-" + $('input[name=Radiosdistance#id#]:checked').val()}}); // deplacement
							})
						</script>
					</div>
				</div>
			</div> <!-- Pan_axes -->
		</center>
	</div>
	<div class="table_bottom">
		<table style="position:absolute; right:0px; bottom:0px; width: 100%; height:;border-radius:#border-radius#;" cellspacing="0" cellpadding="0" border="0">	
			<tr style="height: 22px;">
				<td class="td_bot1" style="width: 18px; text-align: left;">
					<i class="fas fa-info-circle cursor tooltips infcmd noRefresh" title='Autres infos' style="margin-left: 3px; font-size: 0.9em;" ></i>		
					<div class="infhtm" style="display: none;"> 
						<div class="tooltips cmd cmd-widget lastCommunication" data-type="info" data-subtype="string" data-version="dashboard" data-template="line" data-eqlogic_id="#id#" style="display: block;">
							<div class="content-xs">
								<span   class="cmdName">last Communication: </span> 
								<strong class="state">#lastCommunication#</strong>
							</div>
						</div>
						<br/>
						<div class="tooltips cmd cmd-widget numberTryWithoutSuccess" data-type="info" data-subtype="string" data-version="dashboard" data-template="line" data-eqlogic_id="#id#" style="display: block;">
							<div class="content-xs">
								<span   class="cmdName">nombre de tentative de reconnexion: </span> 
								<strong class="state">#numberTryWithoutSuccess#</strong>
							</div>
						</div>
					</div>
				</td>
				<td class="td_bot2" style="text-align: center;">
				</td>
				<td class="td_bot3" style="width: 18px;text-align: right;" nowrap>
					<i class="fas fa-bars cursor tooltips changecmdmenu noRefresh" title='menu' style="margin-right: 3px;"></i>
					<i class="fas fa-tools cursor tooltips changecmdfichier noRefresh" title='fichiers' style="margin-right: 3px;"></i>
					<i class="fas fa-border-none cursor tooltips changecmdaxes noRefresh isconnected" title='axes' style="margin-right: 3px;"></i>
				</td>
			</tr>
			<script>
				if ('#numberTryWithoutSuccess#' >= 3) {
					$('.eqLogic[data-eqLogic_uid=#uid#] .infcmd').css('color', 'red');
				}
				//**************************************//	
				$('.eqLogic[data-eqLogic_uid=#uid#] .infcmd').off('click').on('click', function () {
					$('.eqLogic[data-eqLogic_uid=#uid#] .infcmd').popover({
						container: "body",
						html: true,
						placement: "auto",
						selector : true,
						//title: false,//"<strong>Liste des équipements</strong>",
						content: function () {return $('.eqLogic[data-eqLogic_uid=#uid#] .infhtm').html(); } ,
					})
						.on("show.bs.popover", function () { 
							$(this).data("bs.popover").tip()
							.css({
								"max-width": "500px",
								"max-height":  "400px",
								//overflow: "auto",
								"overflow-y": "auto",
								"background-color": "#474646",//'background-color',
								"background": "#474646",
							});
						});
					$('.eqLogic[data-eqLogic_uid=#uid#] .infcmd').popover('show'); 
				});
				$('.eqLogic[data-eqLogic_uid=#uid#] .changecmdmenu').on('click',function () { // menu
					$('.eqLogic[data-eqLogic_uid=#uid#] .Pan_menu').show();
					$('.eqLogic[data-eqLogic_uid=#uid#] .Pan_fichier').hide();
					$('.eqLogic[data-eqLogic_uid=#uid#] .Pan_axes').hide();
				});
				$('.eqLogic[data-eqLogic_uid=#uid#] .changecmdfichier').on('click',function () { // fichier
					$('.eqLogic[data-eqLogic_uid=#uid#] .Pan_menu').hide();
					$('.eqLogic[data-eqLogic_uid=#uid#] .Pan_fichier').show();
					$('.eqLogic[data-eqLogic_uid=#uid#] .Pan_axes').hide();
				});
				$('.eqLogic[data-eqLogic_uid=#uid#] .changecmdaxes').on('click',function () { // fichier
					$('.eqLogic[data-eqLogic_uid=#uid#] .Pan_menu').hide();
					$('.eqLogic[data-eqLogic_uid=#uid#] .Pan_fichier').hide();
					$('.eqLogic[data-eqLogic_uid=#uid#] .Pan_axes').show();
				});

				$('.eqLogic[data-eqLogic_uid=#uid#] .menu-menu .titre').on('click',function () { // fichier
					$('.eqLogic[data-eqLogic_uid=#uid#] .menu-menu .contenue').toggle();
				});
				$('.eqLogic[data-eqLogic_uid=#uid#] .menu-module .titre').on('click',function () { // fichier
					$('.eqLogic[data-eqLogic_uid=#uid#] .menu-module .contenue').toggle();
				});
				$('.eqLogic[data-eqLogic_uid=#uid#] .menu-outil .titre').on('click',function () { // fichier
					$('.eqLogic[data-eqLogic_uid=#uid#] .menu-outil .contenue').toggle();
				});
				$('.eqLogic[data-eqLogic_uid=#uid#] .menu-caisson .titre').on('click',function () { // fichier
					$('.eqLogic[data-eqLogic_uid=#uid#] .menu-caisson .contenue').toggle();
				});
				$('.eqLogic[data-eqLogic_uid=#uid#] .menu-alim .titre').on('click',function () { // fichier
					$('.eqLogic[data-eqLogic_uid=#uid#] .menu-alim .contenue').toggle();
				});
			</script>
		</table>
	</div>
	<!-- fin table_bottom    -->
</div>
<!-- Fin eqLogic-widget  -->